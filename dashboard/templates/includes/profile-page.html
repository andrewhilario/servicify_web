{% load static %}
{% load humanize %}
{% block css_files %}
<link rel="stylesheet" href="{% static 'css/includes/profile-page.css' %}">
<link rel="stylesheet" href="{% static 'css/includes/dashboard.css' %}">
{% endblock %}
{% block content %}
{% include 'navbar.html' %}
<div class="profile_page">
    <div class="profile-section">
        <div class="profile-header-image">
            <img src="{% static 'images/background-homepage.png'%}" alt="">
        </div>
        <div class="profile-picture-outer">
            <div class="profile-picture">
                <img src="{{ user.mainuser.avatar.url }}" alt="">
            </div>
        </div>
        <div class="profile-header-info">
            <div class="profile-form">
                <div class="profile-name">
                    <p>{{user.mainuser.full_name}}</p>
                    <span>Full Name</span>
                </div>
                <div class="profile-email">
                    <p>{{user.date_joined}}</p>
                    <span>Join Date</span>
                </div>
                <div class="facebook-connect">
                    <a href="#">
                        <i class="fa-brands fa-facebook"></i>
                        <p>Verified</p>
                    </a>
                </div>
            </div>
        </div>

        <!-- Services -->
        <div class="reviews">
            <div class="reviews-header">
                <h2>{{user.mainuser.full_name}}'s Services</h2>
            </div>
            {% for srv in services %}
            <div class="reviews-content">
                <div class="service-details">
                    <div class="review-sub-contents">
                        <div class="reviews-sub-contents-2">
                            <!-- service name -->
                            <div class="name-and-reviews">
                                <a href="{% url 'service_details' srv.service.id  %}"><p>{{srv.service.service_name}} (<i class="fa fa-star checked"></i> {{ srv.avg_rating }})</p></a>
                            </div>
                            <!-- service price -->
                            <div class="">
                                <p>₱{% filter intcomma %}{{ srv.service.price|floatformat }}{% endfilter %}</p>
                            </div>
                            <!-- service location -->
                            <div class="">
                                {% if srv.service.street %} <p><span class="service-loc-l" hidden>{{ srv.service.location }}</span>{{srv.service.street}}</p>
                                {% elif srv.service.sublocality %} <p><span class="service-loc-l" hidden>{{ srv.service.location }}</span>{{srv.service.sublocality}}</p>
                                {% elif srv.service.locality %} <p><span class="service-loc-l" hidden>{{ srv.service.location }}</span>{{srv.service.locality}}</p> {% endif %}
                            </div>
                            <!-- service description -->
                            <div class="review">
                                <p>{{ srv.service.description }}</p>
                            </div>
                            <!-- service clients -->
                            <div class="">
                                <p>Clients: {{ srv.total_clients }}</p>
                            </div>
                        </div>
                    </div>
                    <div class="review-sub-content">
                        <div class="reviews-sub-contents-3">
                            {% for img in srv.service.serviceimage_set.all|slice:":1" %}
                            <div class="pic-and-reviews">
                                <img src="{{ img.image.url }}" alt="">
                            </div>
                            {% endfor %}

                            <div class="review">
                                {% for img in srv.service.serviceimage_set.all %}
                                <img src="{{ img.image.url }}" alt="">
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
                <!-- reviews -->
                <!-- <div class="service-reviews">
                    <div class="">
                        <p>Reviews ({{ reviews.count }})</p>
                    </div>
                </div> -->
            </div>
            {% endfor %}
        </div>

        <!-- Work Offers -->
        <div class="reviews">
            <div class="reviews-header">
                <h2>{{user.mainuser.full_name}}'s Work Offers</h2>
            </div>
            {% for work in work_offers %}
            <div class="reviews-content">
                <div class="service-details">
                    <div class="review-sub-contents">
                        <div class="reviews-sub-contents-2">
                            <!-- workoffer name -->
                            <div class="name-and-reviews">
                                <a href="{% url 'work_offer_bidding' work.work_offer.id  %}"><p>{{ work.work_offer.work_name }} ({{ work.work_offer.status }})</p></a>
                            </div>
                            <!-- workoffer status -->
                            <div class="name-and-reviews">
                                <p>(Total Bids: {{ work.total_bids }})</p>
                            </div>
                            <!-- workoffer starting bid -->
                            <div class="">
                                <p>Starting Bid: ₱{% filter intcomma %}{{ work.work_offer.min_pay|floatformat }}{% endfilter %}</p>
                            </div>
                            <!-- work offer description -->
                            <div class="review">
                                <p>{{ work.work_offer.description }}</p>
                            </div>
                        </div>
                    </div>
                    <div class="review-sub-content">
                        <div class="reviews-sub-contents-3">
                            {% for img in work.work_offer.workofferimage_set.all|slice:":1" %}
                            <div class="pic-and-reviews">
                                <img src="{{ img.image.url }}" alt="">
                            </div>
                            {% endfor %}

                            <div class="review">
                                {% for img in work.work_offer.workofferimage_set.all %}
                                <img src="{{ img.image.url }}" alt="">
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    <button id="scroll-top" class="scroll-top"><i class="fa-solid fa-arrow-up"></i></button>
    {% include 'footer.html' %}
    {% endblock %}